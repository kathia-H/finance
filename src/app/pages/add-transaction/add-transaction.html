<h2>Nouvelle Transaction</h2>

<div style="max-width: 500px; margin: 20px auto; padding: 20px; border: 1px solid #ccc; border-radius: 8px;">
  
  <div style="margin-bottom: 15px;">
    <label style="display: block; margin-bottom: 5px; font-weight: bold;">
      Compte *
    </label>
    <select 
      [value]="account_id" 
      (change)="account_id = $any($event.target).value"
      style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;"
      required
    >
      <option value="">SÃ©lectionnez un compte</option>
      <option *ngFor="let account of accounts" [value]="account.id">
        {{ account.name }} ({{ account.balance }}â‚¬)
      </option>
    </select>
  </div>

  <div style="margin-bottom: 15px;">
    <label style="display: block; margin-bottom: 5px; font-weight: bold;">
      Type de transaction *
    </label>
    <div style="display: flex; gap: 15px;">
      <label style="display: flex; align-items: center; cursor: pointer;">
        <input 
          type="radio" 
          name="type" 
          value="expense" 
          [checked]="type === 'expense'"
          (change)="type = 'expense'"
          style="margin-right: 5px;"
        />
        <span style="color: #dc3545;">ðŸ’¸ DÃ©pense</span>
      </label>
      <label style="display: flex; align-items: center; cursor: pointer;">
        <input 
          type="radio" 
          name="type" 
          value="income" 
          [checked]="type === 'income'"
          (change)="type = 'income'"
          style="margin-right: 5px;"
        />
        <span style="color: #28a745;">ðŸ’° Revenu</span>
      </label>
    </div>
  </div>

  <div style="margin-bottom: 15px;">
    <label style="display: block; margin-bottom: 5px; font-weight: bold;">
      Montant (â‚¬) *
    </label>
    <input 
      type="number" 
      [value]="amount" 
      (input)="amount = +$any($event.target).value || 0"
      step="0.01"
      min="0"
      placeholder="0.00"
      style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;"
      required
    />
  </div>

  <div style="margin-bottom: 15px;">
    <label style="display: block; margin-bottom: 5px; font-weight: bold;">
      CatÃ©gorie *
    </label>
    <input 
      type="text" 
      [value]="category" 
      (input)="category = $any($event.target).value"
      placeholder="Ex: Restaurant, Salaire, Transport..."
      style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;"
      required
    />
  </div>

  <div style="margin-bottom: 15px;">
    <label style="display: block; margin-bottom: 5px; font-weight: bold;">
      Note (optionnel)
    </label>
    <input 
      type="text" 
      [value]="note" 
      (input)="note = $any($event.target).value"
      placeholder="Description de la transaction..."
      style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;"
    />
  </div>

  <div style="margin-bottom: 20px;">
    <label style="display: block; margin-bottom: 5px; font-weight: bold;">
      Date *
    </label>
    <input 
      type="date" 
      [value]="date" 
      (input)="date = $any($event.target).value"
      style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;"
      required
    />
  </div>

  <div style="display: flex; gap: 10px; justify-content: space-between;">
    <button 
      type="button" 
      (click)="goBack()"
      style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 4px; cursor: pointer;"
    >
      Annuler
    </button>
    
    <button 
      type="button" 
      (click)="onSubmit()"
      [disabled]="loading || !account_id || !amount || !category.trim() || !date"
      [style.background-color]="type === 'income' ? '#28a745' : '#dc3545'"
      style="padding: 10px 20px; color: white; border: none; border-radius: 4px; cursor: pointer;"
      [style.opacity]="loading || !account_id || !amount || !category.trim() || !date ? '0.6' : '1'"
    >
      {{ loading ? 'Ajout...' : (type === 'income' ? 'ðŸ’° Ajouter le revenu' : 'ðŸ’¸ Ajouter la dÃ©pense') }}
    </button>
  </div>

  <div *ngIf="message" style="margin-top: 15px; padding: 10px; border-radius: 4px;" 
       [style.background-color]="message.includes('succÃ¨s') ? '#d4edda' : '#f8d7da'"
       [style.color]="message.includes('succÃ¨s') ? '#155724' : '#721c24'">
    {{ message }}
  </div>

</div>
